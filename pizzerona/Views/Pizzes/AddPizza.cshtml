@model IEnumerable<pizzerona.Models.Pizze>

@{
    ViewBag.Title = "AddPizza";
}

<h2>AddPizza</h2>

<p>
    @Html.ActionLink("Create New", "Create")
</p>
<table class="table cardGrande">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.Nome)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.img)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Prezzo)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.TempoConsegna)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Ingredienti)
        </th>
        <th></th>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.Nome)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.img)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Prezzo)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.TempoConsegna)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Ingredienti)
        </td>

        <td>
            @Html.ActionLink("Edit", "Edit", new { id = item.id_Pizza }) |
            @Html.ActionLink("Details", "Details", new { id = item.id_Pizza }) |
            <div>
                <div>

                    <button class="aggiungi-carrello" data-id="@item.id_Pizza">Aggiungi al carrello</button>
                    <form>

                        <input id="Quantita" type="number" name="quantita" value="1" min="1" max="30" class="shadow form-control me-2" style="width: auto;">
                    </form>
                </div>
            </div>
     
            <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
            <script>
        $(document).ready(function () {
        $(".aggiungi-carrello").click(function () {
            var idPizza = $(this).data("id");
            var quantita = $("#Quantita").val()
            $.post("/ORDINEs/AggiungiAlCarrello/", { idPizza: idPizza, quantita: quantita }, function (response) {
                alert(response);
            });
        });
    });
            </script>

        </td>
    </tr>
}

</table>
